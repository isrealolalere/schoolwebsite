{% extends 'khbs-online/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Signup{% endblock %}

{% block extra_style %}
<link
href="{% static 'css\signup.css' %}"
rel="stylesheet"
/>
{% endblock extra_style %}

{% block header %}
<div class="mt-3 mb-5">
    
</div>
{% endblock header %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card mt-5">
          <div class="card-body">
            <h3 class="card-title text-center mb-4">Create an Account</h3>
            <form action="{% url 'online:signup' %}" method="post" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="user-img mt-3 mb-3">
                <img id="previewImageProfile" src="#" alt="Image" style="display:none; width: 150px; height: 150px; border-radius: 50%; background-color: gray;" class="me-auto">
              </div>
              <div class="form-group">
                {{ signupform.profile_img | as_crispy_field}}
              </div>
              <div class="form-group">
                {{ signupform.username | as_crispy_field}}
              </div>
              <div class="form-group">
                {{ signupform.email | as_crispy_field}}
              </div>
              <div class="form-group">
                {{ signupform.first_name | as_crispy_field}}
              </div>
              <div class="form-group">
                {{ signupform.last_name | as_crispy_field}}
              </div>
              <div class="form-group">  
                {{ signupform.password1 | as_crispy_field}}
              </div>
              <div class="form-group">
                {{ signupform.password2 | as_crispy_field}}
              </div>
              <button type="submit" class="btn btn-primary btn-block mt-3">Sign Up</button>
            </form>
          </div>
        </div>
      </div>
    </div>
</div>

<script>
  document.getElementById('profileimg').addEventListener('change', function (event) {
      var input = event.target;
      if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
              document.getElementById('previewImageProfile').src = e.target.result;
              document.getElementById('previewImageProfile').style.display = 'block';
          };

          reader.readAsDataURL(input.files[0]);
      }
  });
</script>
{% endblock content %}